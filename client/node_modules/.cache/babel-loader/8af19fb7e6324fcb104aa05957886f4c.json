{"ast":null,"code":"import { mapState } from 'vuex';\nimport ProductsService from '@/services/ProductsService';\nexport default {\n  name: 'NewItem',\n\n  data() {\n    return {\n      product: {\n        title: null,\n        description: null,\n        username: null\n      },\n      error: null,\n      required: value => !!value || 'Required.'\n    };\n  },\n\n  computed: { ...mapState(['isUserLoggedIn', 'user'])\n  },\n\n  mounted() {\n    if (!this.isUserLoggedIn) {\n      this.$router.push({\n        name: 'Login'\n      });\n      return;\n    }\n  },\n\n  methods: {\n    async create() {\n      this.product.username = this.user.username;\n      const areAllFilled = Object.keys(this.product).every(key => !!this.product[key]);\n\n      if (!areAllFilled) {\n        this.error = 'You need to fill in all required fields';\n        return;\n      }\n\n      try {\n        await ProductsService.createProduct(this.product);\n        this.$router.push({\n          name: 'products'\n        });\n      } catch (err) {\n        console.log(err);\n      }\n    }\n\n  }\n};","map":{"version":3,"mappings":"AA6BA;AACA;AAEA;EACAA,eADA;;EAEAC;IACA;MACAC;QACAC,WADA;QAEAC,iBAFA;QAGAC;MAHA,CADA;MAMAC,WANA;MAOAC;IAPA;EASA,CAZA;;EAcAC,YACA,aACA,gBADA,EAEA,MAFA;EADA,CAdA;;EAqBAC;IACA;MACA;QAAAT;MAAA;MACA;IACA;EACA,CA1BA;;EA4BAU;IACA;MACA;MACA;;MAEA;QACA;QACA;MACA;;MAEA;QACA;QACA;UAAAV;QAAA;MACA,CAHA,CAIA;QACAW;MACA;IACA;;EAjBA;AA5BA","names":["name","data","product","title","description","username","error","required","computed","mounted","methods","console"],"sourceRoot":"src/components","sources":["NewItem.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <section class=\"container\">\r\n      <span class=\"error\" v-if=\"error\">{{error}}</span>\r\n      <div class=\"box\">  \r\n        <p>Add Printer\r\n            <router-link to=\"/create\">\r\n                <span class=\"material-icons\">\r\n                add\r\n                </span>\r\n            </router-link>\r\n        </p>\r\n        \r\n        <input type=\"text\" id=\"title\" name =\"title\" class=\"btn\"\r\n        placeholder=\"Title\" v-model=\"product.title\" maxlength=\"50\"\r\n        required :rules=\"required\">\r\n        \r\n        <textarea id=\"description\" name =\"description\" class=\"btn\"\r\n        placeholder=\"Description\" v-model=\"product.description\"\r\n        required :rules=\"required\"> </textarea>             \r\n\r\n        <input type=\"submit\" class=\"send\" name=\"create\"\r\n        value=\"Create Auction\" @click=\"create\">\r\n      </div> \r\n    </section>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {mapState} from 'vuex'\r\nimport ProductsService from '@/services/ProductsService'\r\n\r\nexport default {\r\n  name: 'NewItem',\r\n  data () {\r\n    return {\r\n       product: {\r\n        title: null,\r\n        description: null,\r\n        username: null,\r\n      },\r\n      error: null,\r\n      required: (value) => !!value || 'Required.'\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    ...mapState([\r\n    'isUserLoggedIn',\r\n    'user'\r\n    ])\r\n  },\r\n\r\n  mounted () {\r\n    if (!this.isUserLoggedIn) {\r\n    this.$router.push({name: 'Login'})\r\n    return\r\n    }  \r\n  },\r\n\r\n  methods: {\r\n    async create () {\r\n      this.product.username = this.user.username\r\n      const areAllFilled = Object.keys(this.product).every(key => !!this.product[key])\r\n\r\n      if (!areAllFilled) {\r\n        this.error = 'You need to fill in all required fields'\r\n        return\r\n      }\r\n      \r\n      try{\r\n        await ProductsService.createProduct(this.product)\r\n        this.$router.push({name: 'products'})\r\n      }\r\n      catch(err) {\r\n      console.log(err)\r\n      }\r\n    }\r\n  },  \r\n}\r\n</script>\r\n\r\n<style scoped>\r\n  .box {\r\n    min-width: 800px;\r\n  }\r\n\r\n  @media screen and (max-width: 768px) {\r\n    .box {\r\n      min-height: 550px;\r\n      min-width: 300px;\r\n      margin-top: 80px;\r\n    }\r\n    textarea {\r\n      min-height: 250px;\r\n    }\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}